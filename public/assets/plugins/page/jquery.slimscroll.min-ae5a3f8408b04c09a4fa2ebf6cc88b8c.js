/*! Copyright (c) 2011 Piotr Rochala (http://rocha.la)
 * Dual licensed under the MIT (http://www.opensource.org/licenses/mit-license.php)
 * and GPL (http://www.opensource.org/licenses/gpl-license.php) licenses.
 *
 * Version: 1.0.6
 *
 */
!function(t){jQuery.fn.extend({slimScroll:function(e){var n=t.extend({wheelStep:20,width:"auto",height:"250px",size:"7px",color:"#000",position:"right",distance:"1px",start:"top",opacity:.4,alwaysVisible:!1,disableFadeOut:!1,railVisible:!1,railColor:"#333",railOpacity:"0.2",railClass:"slimScrollRail",barClass:"slimScrollBar",wrapperClass:"slimScrollDiv",allowPageScroll:!1,scroll:0,touchScrollStep:200},e);return this.each(function(){function i(t,e,i){var a=t,o=v.outerHeight()-y.outerHeight();e&&(a=parseInt(y.css("top"))+t*parseInt(n.wheelStep)/100*y.outerHeight(),a=Math.min(Math.max(a,0),o),y.css({top:a+"px"})),f=parseInt(y.css("top"))/(v.outerHeight()-y.outerHeight()),a=f*(v[0].scrollHeight-v.outerHeight()),i&&(a=t,t=a/v[0].scrollHeight*v.outerHeight(),t=Math.min(Math.max(t,0),o),y.css({top:t+"px"})),v.scrollTop(a),r(),s()}function a(){d=Math.max(v.outerHeight()/v[0].scrollHeight*v.outerHeight(),g),y.css({height:d+"px"})}function r(){a(),clearTimeout(u),f==~~f&&(m=n.allowPageScroll,p!=f&&v.trigger("slimscroll",0==~~f?"top":"bottom")),p=f,d>=v.outerHeight()?m=!0:(y.stop(!0,!0).fadeIn("fast"),n.railVisible&&w.stop(!0,!0).fadeIn("fast"))}function s(){n.alwaysVisible||(u=setTimeout(function(){n.disableFadeOut&&o||l||h||(y.fadeOut("slow"),w.fadeOut("slow"))},1e3))}var o,l,h,u,c,d,f,p,g=30,m=!1,v=t(this);if(v.parent().hasClass("slimScrollDiv")){var b=v.scrollTop(),y=v.parent().find(".slimScrollBar"),w=v.parent().find(".slimScrollRail");a(),e&&("scrollTo"in e?b=parseInt(n.scrollTo):"scrollBy"in e&&(b+=parseInt(n.scrollBy)),i(b,!1,!0))}else{n.height="auto"==n.height?v.parent().innerHeight():n.height,b=t("<div></div>").addClass(n.wrapperClass).css({position:"relative",overflow:"hidden",width:n.width,height:n.height}),v.css({overflow:"hidden",width:n.width,height:n.height});var w=t("<div></div>").addClass(n.railClass).css({width:n.size,height:"100%",position:"absolute",top:0,display:n.alwaysVisible&&n.railVisible?"block":"none","border-radius":n.size,background:n.railColor,opacity:n.railOpacity,zIndex:90}),y=t("<div></div>").addClass(n.barClass).css({background:n.color,width:n.size,position:"absolute",top:0,opacity:n.opacity,display:n.alwaysVisible?"block":"none","border-radius":n.size,BorderRadius:n.size,MozBorderRadius:n.size,WebkitBorderRadius:n.size,zIndex:99}),x="right"==n.position?{right:n.distance}:{left:n.distance};w.css(x),y.css(x),v.wrap(b),v.parent().append(y),v.parent().append(w),y.draggable({axis:"y",containment:"parent",start:function(){h=!0},stop:function(){h=!1,s()},drag:function(){i(0,t(this).position().top,!1)}}),w.hover(function(){r()},function(){s()}),y.hover(function(){l=!0},function(){l=!1}),v.hover(function(){o=!0,r(),s()},function(){o=!1,s()}),v.bind("touchstart",function(t){t.originalEvent.touches.length&&(c=t.originalEvent.touches[0].pageY)}),v.bind("touchmove",function(t){t.originalEvent.preventDefault(),t.originalEvent.touches.length&&i((c-t.originalEvent.touches[0].pageY)/n.touchScrollStep,!0)});var _=function(t){if(o){t=t||window.event;var e=0;t.wheelDelta&&(e=-t.wheelDelta/120),t.detail&&(e=t.detail/3),i(e,!0),t.preventDefault&&!m&&t.preventDefault(),m||(t.returnValue=!1)}};!function(){window.addEventListener?(this.addEventListener("DOMMouseScroll",_,!1),this.addEventListener("mousewheel",_,!1)):document.attachEvent("onmousewheel",_)}(),a(),"bottom"==n.start?(y.css({top:v.outerHeight()-y.outerHeight()}),i(0,!0)):"object"==typeof n.start&&(i(t(n.start).position().top,null,!0),n.alwaysVisible||y.hide())}}),this}}),jQuery.fn.extend({slimscroll:jQuery.fn.slimScroll})}(jQuery);