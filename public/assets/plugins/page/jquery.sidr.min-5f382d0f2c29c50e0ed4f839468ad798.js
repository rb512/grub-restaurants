/*! Sidr - v1.1.1 - 2013-03-14
 * https://github.com/artberri/sidr
 * Copyright (c) 2013 Alberto Varela; Licensed MIT */
!function(t){var e=!1,n=!1,i={isUrl:function(t){var e=RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i");return e.test(t)?!0:!1},loadContent:function(t,e){t.html(e)},addPrefix:function(t){var e=t.attr("id"),n=t.attr("class");"string"==typeof e&&""!==e&&t.attr("id",e.replace(/([A-Za-z0-9_.\-]+)/g,"sidr-id-$1")),"string"==typeof n&&""!==n&&"sidr-inner"!==n&&t.attr("class",n.replace(/([A-Za-z0-9_.\-]+)/g,"sidr-class-$1")),t.removeAttr("style")},execute:function(i,r,s){"function"==typeof r?(s=r,r="sidr"):r||(r="sidr");var o,l,h,u=t("#"+r),c=t(u.data("body")),d=t("html"),f=u.outerWidth(!0),p=u.data("speed"),g=u.data("side");if("open"===i||"toogle"===i&&!u.is(":visible")){if(u.is(":visible")||e)return;if(n!==!1)return a.close(n,function(){a.open(r)}),void 0;e=!0,"left"===g?(o={left:f+"px"},l={left:"0px"}):(o={right:f+"px"},l={right:"0px"}),h=d.scrollTop(),d.css("overflow-x","hidden").scrollTop(h),c.css({width:c.width(),position:"absolute"}).animate(o,p),u.css("display","block").animate(l,p,function(){e=!1,n=r,"function"==typeof s&&s(r)})}else{if(!u.is(":visible")||e)return;e=!0,"left"===g?(o={left:0},l={left:"-"+f+"px"}):(o={right:0},l={right:"-"+f+"px"}),h=d.scrollTop(),d.removeAttr("style").scrollTop(h),c.animate(o,p),u.animate(l,p,function(){u.removeAttr("style"),c.removeAttr("style"),t("html").removeAttr("style"),e=!1,n=!1,"function"==typeof s&&s(r)})}}},a={open:function(t,e){i.execute("open",t,e)},close:function(t,e){i.execute("close",t,e)},toogle:function(t,e){i.execute("toogle",t,e)}};t.sidr=function(e){return a[e]?a[e].apply(this,Array.prototype.slice.call(arguments,1)):"function"!=typeof e&&"string"!=typeof e&&e?(t.error("Method "+e+" does not exist on jQuery.sidr"),void 0):a.toogle.apply(this,arguments)},t.fn.sidr=function(e){var n=t.extend({name:"sidr",speed:200,side:"left",source:null,renaming:!0,body:"body"},e),r=n.name,s=t("#"+r);if(0===s.length&&(s=t("<div />").attr("id",r).appendTo(t("body"))),s.addClass("sidr").addClass(n.side).data({speed:n.speed,side:n.side,body:n.body}),"function"==typeof n.source){var o=n.source(r);i.loadContent(s,o)}else if("string"==typeof n.source&&i.isUrl(n.source))t.get(n.source,function(t){i.loadContent(s,t)});else if("string"==typeof n.source){var l="",h=n.source.split(",");if(t.each(h,function(e,n){l+='<div class="sidr-inner">'+t(n).html()+"</div>"}),n.renaming){var u=t("<div />").html(l);u.find("*").each(function(e,n){var a=t(n);i.addPrefix(a)}),l=u.html()}i.loadContent(s,l)}else null!==n.source&&t.error("Invalid Sidr Source");return this.each(function(){var e=t(this),n=e.data("sidr");n||(e.data("sidr",r),e.click(function(t){t.preventDefault(),a.toogle(r)}))})}}(jQuery);